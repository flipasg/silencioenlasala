<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

{{/* Dynamic Title */}}
<title>
  {{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}
</title>

{{/* Theme Color */}}
<meta name="theme-color" content="#ffeee5" />

{{/* Basic Meta Tags */}}
<meta name="author" content="{{ site.Params.author | default "Iker Garcia" }}" />
<meta name="generator" content="Hugo {{ hugo.Version }}" />

{{/* Description */}}
{{ $description := site.Params.description | default "El silencio es el gran maestro, y para aprender sus lecciones hay que estar atento a Ã©l." }}
{{ if .Description }}
  {{ $description = .Description }}
{{ else if .Summary }}
  {{ $description = .Summary }}
{{ end }}
<meta name="description" content="{{ $description }}" />

{{/* Canonical URL */}}
<link rel="canonical" href="{{ .Permalink }}" />

{{/* Social Media Image */}}
{{ $socialImage := site.Params.image | default "/images/light/logo.png" }}
{{ if .Params.image }}
  {{ $socialImage = .Params.image }}
{{ end }}

{{/* Open Graph Meta Tags */}}
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />
<meta property="og:site_name" content="{{ site.Title }}" />
<meta property="og:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:image" content="{{ $socialImage | absURL }}" />
<meta property="og:image:secure_url" content="{{ $socialImage | absURL }}" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:locale" content="es_ES" />
<meta property="og:locale:alternate" content="en_GB" />

{{/* Twitter Card Meta Tags */}}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="{{ site.Params.twitter | default "@flipasg" }}" />
<meta name="twitter:creator" content="{{ site.Params.twitter | default "@flipasg" }}" />
<meta name="twitter:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}" />
<meta name="twitter:description" content="{{ $description }}" />
<meta name="twitter:image" content="{{ $socialImage | absURL }}" />

{{/* Article specific meta tags */}}
{{ if .IsPage }}
<meta property="article:author" content="{{ site.Params.author | default "Iker Garcia" }}" />
{{ if .PublishDate }}
<meta property="article:published_time" content="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}" />
{{ end }}
{{ if .Lastmod }}
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}" />
{{ end }}
{{ with .Params.tags }}
{{ range . }}
<meta property="article:tag" content="{{ . }}" />
{{ end }}
{{ end }}
{{ end }}

{{/* Favicons */}}
<link rel="icon" type="image/x-icon" href="/images/light/moon.png" />
<link rel="shortcut icon" type="image/x-icon" href="/images/light/logo.png" />
<link rel="apple-touch-icon" href="/images/light/logo.png" />

{{/* RSS Feeds */}}
<link rel="alternate" type="application/atom+xml" title="{{ site.Title }} - Atom" href="{{ "index.xml" | absURL }}" />
<link rel="alternate" type="application/rss+xml" title="{{ site.Title }} - RSS" href="{{ "index.xml" | absURL }}" />

{{/* Font Preloading - Critical fonts loaded first to prevent FOUT */}}
<link rel="preload" href="/fonts/Lato/Lato-Regular.ttf" as="font" type="font/ttf" crossorigin>
<link rel="preload" href="/fonts/Lato/Lato-Light.ttf" as="font" type="font/ttf" crossorigin>
<link rel="preload" href="/fonts/Old_Standard_TT/OldStandardTT-Regular.ttf" as="font" type="font/ttf" crossorigin>

{{/* Immediate Theme Loading - Prevents Flash */}}
<script>
(function() {
  function getStoredTheme() {
    try {
      return localStorage.getItem('theme');
    } catch (e) {
      return null;
    }
  }
  
  function getPreferredTheme() {
    return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  }
  
  // Apply theme immediately before page renders
  const theme = getStoredTheme() || getPreferredTheme();
  document.documentElement.setAttribute('data-theme', theme);
})();
</script>

{{/* Analytics */}}
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TZGWFR9DF1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-TZGWFR9DF1');
</script>

{{/* Partials */}}
{{ partialCached "head/css.html" . }}
{{ partialCached "head/js.html" . }}
